{
  "openapi": "3.1.0",
  "info": {
    "title": "Finance Assistant API - Kompletn√°",
    "description": "Pln√° kontrola financi√≠ cez ChatGPT",
    "version": "2.0.0"
  },
  "servers": [
    {
      "url": "https://finance-management-system-production.up.railway.app"
    }
  ],
  "paths": {
    "/api/health": {
      "get": {
        "operationId": "healthCheck",
        "summary": "Health check",
        "responses": {"200": {"description": "OK"}}
      }
    },
    "/api/gpt/accounts/list": {
      "get": {
        "operationId": "listAccounts",
        "summary": "Zoznam bankov√Ωch √∫ƒçtov",
        "responses": {"200": {"description": "Zoznam √∫ƒçtov"}}
      }
    },
    "/api/gpt/accounts/{account_id}/summary": {
      "get": {
        "operationId": "getAccountSummary",
        "summary": "Detailn√Ω prehƒæad konkr√©tneho √∫ƒçtu",
        "parameters": [
          {"name": "account_id", "in": "path", "required": true, "schema": {"type": "integer"}},
          {"name": "days", "in": "query", "schema": {"type": "integer", "default": 30}}
        ],
        "responses": {"200": {"description": "Prehƒæad √∫ƒçtu"}}
      }
    },
    "/api/gpt/transactions/summary": {
      "get": {
        "operationId": "getTransactionsSummary",
        "summary": "Celkov√© zhrnutie - v√Ωdavky, pr√≠jmy, poƒçet",
        "parameters": [
          {"name": "days", "in": "query", "schema": {"type": "integer", "default": 30}},
          {"name": "account_id", "in": "query", "schema": {"type": "integer"}}
        ],
        "responses": {"200": {"description": "Zhrnutie"}}
      }
    },
    "/api/gpt/transactions/recent": {
      "get": {
        "operationId": "getRecentTransactions",
        "summary": "Posledn√© transakcie s detailami",
        "parameters": [
          {"name": "limit", "in": "query", "schema": {"type": "integer", "default": 10}}
        ],
        "responses": {"200": {"description": "Transakcie"}}
      }
    },
    "/api/gpt/transactions/by-category": {
      "get": {
        "operationId": "getTransactionsByCategory",
        "summary": "V√Ωdavky zoskupen√© podƒæa kateg√≥ri√≠",
        "parameters": [
          {"name": "days", "in": "query", "schema": {"type": "integer", "default": 30}}
        ],
        "responses": {"200": {"description": "V√Ωdavky podƒæa kateg√≥ri√≠"}}
      }
    },
    "/api/gpt/transactions/top-merchants": {
      "get": {
        "operationId": "getTopMerchants",
        "summary": "Top obchodn√≠ci kde m√≠≈àa≈° najviac",
        "parameters": [
          {"name": "limit", "in": "query", "schema": {"type": "integer", "default": 10}},
          {"name": "days", "in": "query", "schema": {"type": "integer", "default": 30}}
        ],
        "responses": {"200": {"description": "Top obchodn√≠ci"}}
      }
    },
    "/api/gpt/transactions/monthly": {
      "get": {
        "operationId": "getMonthlyStats",
        "summary": "Mesaƒçn√© ≈°tatistiky - trendy v√Ωdavkov",
        "parameters": [
          {"name": "months", "in": "query", "schema": {"type": "integer", "default": 6}}
        ],
        "responses": {"200": {"description": "Mesaƒçn√© d√°ta"}}
      }
    },
    "/api/gpt/transactions/search": {
      "get": {
        "operationId": "searchTransactions",
        "summary": "Vyhƒæad√°vanie transakci√≠ podƒæa filtrov",
        "description": "D√îLE≈ΩIT√â: Ka≈æd√° transakcia v results[] m√° pole 'transaction_id' (alebo 'TransactionID'). Toto ID MUS√ç≈† pou≈æi≈• v bulk-categorize! NIKDY NEPOU≈Ω√çVAJ array index (0,1,2...)!",
        "parameters": [
          {"name": "merchant", "in": "query", "schema": {"type": "string"}, "description": "N√°zov obchodn√≠ka"},
          {"name": "category", "in": "query", "schema": {"type": "string"}, "description": "Kateg√≥ria"},
          {"name": "min_amount", "in": "query", "schema": {"type": "number"}, "description": "Min suma"},
          {"name": "max_amount", "in": "query", "schema": {"type": "number"}, "description": "Max suma"},
          {"name": "account_id", "in": "query", "schema": {"type": "integer"}, "description": "Filter podƒæa √∫ƒçtu"},
          {"name": "limit", "in": "query", "schema": {"type": "integer", "default": 50}, "description": "Poƒçet v√Ωsledkov"}
        ],
        "responses": {
          "200": {
            "description": "V√Ωsledky vyhƒæad√°vania. V≈ΩDY ƒç√≠taj transaction_id z ka≈æd√©ho objektu!",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "results": {
                      "type": "array",
                      "description": "Zoznam transakci√≠. NIKDY nepou≈æ√≠vaj array index! V≈ædy pou≈æi pole transaction_id z objektu!",
                      "items": {
                        "type": "object",
                        "properties": {
                          "transaction_id": {"type": "integer", "description": "SKUTOƒåN√â ID transakcie - POU≈ΩI TOTO pre bulk-categorize!", "example": 23},
                          "TransactionID": {"type": "integer", "description": "SKUTOƒåN√â ID transakcie (alternat√≠vny n√°zov)", "example": 23},
                          "TransactionDate": {"type": "string", "example": "2025-11-05 10:30:00"},
                          "Amount": {"type": "number", "example": -15.50},
                          "Currency": {"type": "string", "example": "EUR"},
                          "MerchantName": {"type": "string", "example": "BILLA 122"},
                          "Description": {"type": "string"},
                          "CategoryName": {"type": "string", "example": "Nezaraden√©"},
                          "CategoryIcon": {"type": "string"},
                          "AccountName": {"type": "string"}
                        },
                        "required": ["transaction_id", "TransactionID"]
                      },
                      "example": [
                        {
                          "transaction_id": 23,
                          "TransactionID": 23,
                          "MerchantName": "BILLA 122",
                          "Amount": -15.50,
                          "CategoryName": "Nezaraden√©"
                        },
                        {
                          "transaction_id": 24,
                          "TransactionID": 24,
                          "MerchantName": "Dr.Max 383",
                          "Amount": -8.20,
                          "CategoryName": "Nezaraden√©"
                        }
                      ]
                    },
                    "count": {"type": "integer", "example": 2}
                  },
                  "example": {
                    "results": [
                      {"transaction_id": 23, "TransactionID": 23, "MerchantName": "BILLA 122", "Amount": -15.50, "CategoryName": "Nezaraden√©"},
                      {"transaction_id": 24, "TransactionID": 24, "MerchantName": "Dr.Max 383", "Amount": -8.20, "CategoryName": "Nezaraden√©"}
                    ],
                    "count": 2
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/gpt/categories/list": {
      "get": {
        "operationId": "listCategories",
        "summary": "Zoznam v≈°etk√Ωch kateg√≥ri√≠ v√Ωdavkov",
        "responses": {"200": {"description": "Kateg√≥rie"}}
      }
    },
    "/api/gpt/transactions/bulk-categorize": {
      "post": {
        "operationId": "bulkCategorizeTransactions",
        "summary": "Hromadn√° kategoriz√°cia transakci√≠ - GPT m√¥≈æe meni≈• kateg√≥rie viacer√Ωch transakci√≠ naraz",
        "description": "Umo≈æ≈àuje ChatGPT agentovi kategorizova≈• viacer√© transakcie naraz. Syst√©m sa automaticky uƒç√≠ z t√Ωchto priraden√≠.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "updates": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "transaction_id": {"type": "integer", "description": "ID transakcie"},
                        "category_name": {"type": "string", "description": "N√°zov kateg√≥rie (m√¥≈æe obsahova≈• emoji)"}
                      },
                      "required": ["transaction_id", "category_name"]
                    }
                  }
                },
                "required": ["updates"]
              },
              "example": {
                "updates": [
                  {"transaction_id": 123, "category_name": "Potraviny"},
                  {"transaction_id": 124, "category_name": "Zdravie a lieky üíä"}
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Kategoriz√°cia √∫spe≈°n√°",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {"type": "boolean"},
                    "updated": {"type": "integer", "description": "Poƒçet aktualizovan√Ωch transakci√≠"},
                    "learned_rules": {"type": "integer", "description": "Poƒçet nauƒçen√Ωch pravidiel"},
                    "total_requested": {"type": "integer"},
                    "errors": {"type": "array", "items": {"type": "string"}}
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}

